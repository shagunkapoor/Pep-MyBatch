import java.util.Arrays;

public class KMP {

	public static void main(String[] args) {
		// TODO Auto-generated method stub

		String m = "abdcaabraakadaabraaaabdceabcdaabdcefabghiaa";

		String pat = "abdcefab";

		int[] lps = new int[pat.length() + 1];
		lps = pitable(pat); // longest prefix which is same as some suffix (lps)

	}

	public static int[] pitable(String pat) {
		int[] lps = new int[pat.length() + 1];

		Arrays.fill(lps, 0);

		int length = 0;
		for (int i = 1; i < pat.length();) {
			char ch = pat.charAt(i);
			if (ch == pat.charAt(length)) {
				length++;
				lps[i] = length;
				i++;
			} else {
				if (length != 0) {
					length = lps[length - 1]; // to reach to a location where
												// there is the index of the
												// longest possible prefix same
												// as suffix
				} else {
					lps[i] = length;
					i++;
				}
			}
		}

		return lps;

	}

}
